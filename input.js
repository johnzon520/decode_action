(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-luckdraw-circle-awsc"],{"0602":function(t,e,i){"use strict";i.r(e);var a=i("5eb6"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},2180:function(t,e,i){var a=i("dd85");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("1acae6fe",a,!0,{sourceMap:!1,shadowMode:!1})},"30a9":function(t,e,i){"use strict";(function(t){i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.setStore=e.pathToBase64=e.getStore=e.downloadFile=e.clearStore=e.clearCacheFile=e.clacTextLen=e.circleImg=e.base64ToPath=void 0;var n=a(i("53ca"));i("e9c4"),i("cb29"),i("d3b7"),i("c975"),i("d9e2"),i("d401"),i("ac1f"),i("466d"),i("81b2"),i("0eb6"),i("b7ef"),i("8bd4"),i("ace4"),i("5cc6"),i("907a"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("986a"),i("1d02"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("b39a"),i("72f7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("5319");e.setStore=function(t,e){t&&("string"!==typeof e&&(e=JSON.stringify(e)),uni.setStorageSync(t,e))};e.getStore=function(t){if(t)return uni.getStorageSync(t)};e.clearStore=function(e){e?uni.removeStorageSync(e):(t("log","娓呯悊鏈湴鍏ㄩ儴缂撳瓨"," at uni_modules/almost-lottery/utils/almost-utils.js:31"),uni.clearStorageSync())};e.circleImg=function(t,e,i,a,n,o){var r=Math.floor(n/2),s=i+r,l=a+r;t.save(),t.beginPath(),t.arc(s,l,r,0,2*Math.PI),t.fill(),t.clip(),t.drawImage(e,i,a,n,o),t.restore()};e.clacTextLen=function(t){if(!t)return{byteLen:0,realLen:0};t+="";for(var e=0,i=0;i<t.length;i++)t.charCodeAt(i)<0||t.charCodeAt(i)>255?e+=2:e+=1;return{byteLen:e,realLen:e/2}};e.downloadFile=function(t){return new Promise((function(e){uni.downloadFile({url:t,success:function(t){e({ok:!0,data:t.errMsg,tempFilePath:t.tempFilePath})},fail:function(t){e({ok:!1,data:t.errMsg,msg:"鍥剧墖涓嬭浇澶辫触"})}})}))};e.clearCacheFile=function(){};e.pathToBase64=function(e){return new Promise((function(i,a){if("object"===("undefined"===typeof window?"undefined":(0,n.default)(window))&&"document"in window){if("function"===typeof FileReader){var o=new XMLHttpRequest;return o.open("GET",e,!0),o.responseType="blob",o.onload=function(){if(200===this.status){var t=new FileReader;t.onload=function(t){i(t.target.result)},t.onerror=a,t.readAsDataURL(this.response)}},o.onerror=a,void o.send()}var r=document.createElement("canvas"),s=r.getContext("2d"),l=new Image;return l.onload=function(){r.width=l.width,r.height=l.height,s.drawImage(l,0,0),i(r.toDataURL()),r.height=r.width=0},l.onerror=a,void(l.src=e)}if("object"!==("undefined"===typeof plus?"undefined":(0,n.default)(plus)))"object"===("undefined"===typeof wx?"undefined":(0,n.default)(wx))&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(t){i("data:image/png;base64,"+t.data)},fail:function(t){a(t)}}):a(new Error("not support"));else{var c=function(t){if(0===t.indexOf("_www")||0===t.indexOf("_doc")||0===t.indexOf("_documents")||0===t.indexOf("_downloads"))return t;if(0===t.indexOf("/storage/emulated/0/"))return t;if(0===t.indexOf("/storage/sdcard0/"))return t;if(0===t.indexOf("/var/mobile/"))return t;if(0===t.indexOf("file://"))return t;if(0===t.indexOf("/")){var e="iOS"===plus.os.name?t:plus.io.convertLocalFileSystemURL(t);if(e!==t)return e;t=t.substring(1)}return"_www/"+t}(e);plus.io.resolveLocalFileSystemURL(c,(function(e){e.file((function(e){var n=new plus.io.FileReader;n.onload=function(t){i(t.target.result)},n.onerror=function(e){t("log",e," at uni_modules/almost-lottery/utils/almost-utils.js:212"),a(e)},n.readAsDataURL(e)}),(function(t){a(t)}))}),(function(t){a(t)}))}}))};e.base64ToPath=function(t){return new Promise((function(e,i){if("object"===("undefined"===typeof window?"undefined":(0,n.default)(window))&&"document"in window){t=t.split(",");var a=t[0].match(/:(.*?);/)[1],o=atob(t[1]),r=o.length,s=new Uint8Array(r);while(r--)s[r]=o.charCodeAt(r);return e((window.URL||window.webkitURL).createObjectURL(new Blob([s],{type:a})))}var l=t.match(/data\:\S+\/(\S+);/);l?l=l[1]:i(new Error("base64 error"));var c=Date.now()+"."+l;if("object"!==("undefined"===typeof plus?"undefined":(0,n.default)(plus)))if("object"===("undefined"===typeof wx?"undefined":(0,n.default)(wx))&&wx.canIUse("getFileSystemManager")){var u=wx.env.USER_DATA_PATH+"/"+c;wx.getFileSystemManager().writeFile({filePath:u,data:t.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){e(u)},fail:function(t){i(t)}})}else i(new Error("not support"));else{var d=new plus.nativeObj.Bitmap("bitmap"+Date.now());d.loadBase64Data(t,(function(){var t="_doc/uniapp_temp/"+c;d.save(t,{},(function(){d.clear(),e(t)}),(function(t){d.clear(),i(t)}))}),(function(t){d.clear(),i(t)}))}}))}}).call(this,i("0de9")["log"])},"376b":function(t,e,i){t.exports=i.p+"static/img/1.e5701211.png"},"3b65":function(t,e,i){"use strict";var a=i("2180"),n=i.n(a);n.a},"3d72":function(t,e,i){var a=i("f7fc");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("4dbf7d73",a,!0,{sourceMap:!1,shadowMode:!1})},"3efb":function(t,e,i){"use strict";i.r(e);var a=i("fbe3"),n=i("a995");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("7791");var r=i("f0c5"),s=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"bc8e5092",null,!1,a["a"],void 0);e["default"]=s.exports},"5eb6":function(t,e,i){"use strict";(function(t){i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("2909")),o=a(i("c7eb")),r=a(i("1da1"));i("99af"),i("d3b7"),i("159b"),i("d81d");var s=a(i("ac3d")),l=a(i("3efb")),c=i("30a9"),u={components:{Awsc:s.default,AlmostLottery2:l.default},data:function(){return{showAwsc:!0,awscData:{},swiperCurrent_img:0,info:{},noticeList:[],videoUrl:"",isDev:!0,canvasConfig:{canvasId:"almostLotteryCanvas"},prizeList:[],onStock:!0,prizeIndex:-1,prizeing:!1,onFrontend:!1,weightTotal:0,weightArr:[],freeNum:0,freeNumDay:3,showPop:!1,popAward:{},awards:[],size:10,current:1,total:0,pages:1,status:"loadmore",loadText:{loadmore:"鐐瑰嚮鎴栦笂鎷夊姞杞芥洿澶�",loading:"鍔姏鍔犺浇涓�",nomore:"娌℃湁鏇村"},isInit:!0,phone:"",activityId:this.$store.state.config.activityId||29,msg:""}},computed:{isApple:function(){return"ios"===uni.getSystemInfoSync().platform},isInApp:function(){return window.$isInWC}},methods:{gotoForm:function(){location.href="https://srvdt-app.taizhou.com.cn/questionnaire/#/?activityId="+this.$store.state.config.formId+"&withUserAgent=true&back="+encodeURIComponent(location.href)},gotoApp:function(){var e=this;uni.showModal({content:"璇疯繘鍏ユ湜娼瓵PP鍙備笌鎶藉浜掑姩",showCancel:!1,success:function(){var i=document.createElement("a"),a="wangchao://".concat(location.host+location.pathname+location.hash);t("log","uni.getSystemInfoSync().platform==",uni.getSystemInfoSync().platform," at pages/luckdraw/circle-awsc.vue:188"),"android"==uni.getSystemInfoSync().platform?(i.href="https://a.app.qq.com/o/simple.jsp?pkgname=com.shangc.tiennews.taizhou&"+uni.getSystemInfoSync().platform+"_schema="+(e.$store.state.config.newsId?"wangchao://vapp.taizhou.com.cn/webDetails/news?id="+e.$store.state.config.newsId+"&tenantId=64":encodeURIComponent(a)),setTimeout((function(){window.location.href=i.href}),3e3)):(i.href="https://vapp.taizhou.com.cn/com.huidu.taizhounews/?url=https%3A%2F%2Fa.app.qq.com%2Fo%2Fsimple.jsp%3Fpkgname%3Dcom.shangc.tiennews.taizhou%26"+uni.getSystemInfoSync().platform+"_scheme%3Dwangchao%3A%2F%2Fvapp.taizhou.com.cn%2FwebDetails%2Fnews%3Fid%3D"+e.$store.state.config.newsId+"%26tenantId%3D64",e.$store.state.config.newsId||(i.href="https://vapp.taizhou.com.cn/com.huidu.taizhounews/?url=https%3A%2F%2Fa.app.qq.com%2Fo%2Fsimple.jsp%3Fpkgname%3Dcom.shangc.tiennews.taizhou%26"+uni.getSystemInfoSync().platform+"_scheme%3D"+encodeURIComponent(a))),t("log","a.href",i.href," at pages/luckdraw/circle-awsc.vue:211"),i.click()}})},finish:function(t){var e=this.popAward,i=this;uni.request({url:i.$baseUrl+"/tzrb/userAwardRecordUpgrade/writeOffByCode",method:"POST",data:{id:e.id,writeOffCode:t},header:{"Content-type":"application/x-www-form-urlencoded"},success:function(t){200==t.data.code?(uni.showToast({title:t.data.message,duration:3e3,mask:!0}),i.size=10,i.current=1,i.pages=1,i.getAward(!1)):uni.showToast({title:t.data.message,duration:3e3,mask:!0,icon:"none"})}}),this.showPop=!1},useAward:function(t){this.showPop=!0,this.popAward=t},getAward:function(t){var e=this;uni.request({url:e.$baseUrl+"/tzrb/userAwardRecordUpgrade/pageList",data:{pageSize:e.size,pageNum:e.current,activityId:this.activityId},success:function(i){if(200==i.data.code){var a=i.data.data.records;e.awards=t?e.awards.concat(a):a,e.pages=i.data.data.pages,e.total=i.data.data.total,e.status=0==e.total?"nomore":"loadmore"}else if(-1==i.data.code){if(!e.isInApp)return void e.gotoApp()}else uni.showModal({content:i.data.message,showCancel:!1})}})},handleInitCanvas:function(){(0,c.clearCacheFile)(),this.prizeList=[],this.getPrizeList()},getPrizeList:function(){var e=this;return(0,r.default)((0,o.default)().mark((function i(){var a,n;return(0,o.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.requestApiGetPrizeList();case 2:a=i.sent,a.ok?(n=a.data,n.length&&(e.prizeList=n,t("log","宸茶幏鍙栧埌濂栧搧鍒楄〃鏁版嵁锛屽紑濮嬬粯鍒舵娊濂栬浆鐩�"," at pages/luckdraw/circle-awsc.vue:333"),e.onFrontend&&(e.weightTotal=0,e.prizeList.forEach((function(t){return e.weightTotal+=t.weight})),e.weightArr=e.prizeList.map((function(t){return t.weight}))))):uni.showToast({title:"鑾峰彇濂栧搧澶辫触",icon:"none"});case 4:case"end":return i.stop()}}),i)})))()},requestApiGetPrizeList:function(){var t=this;return new Promise((function(e,i){uni.request({url:t.$baseUrl+"/tzrb/awardUpgrade/list?activityId="+t.activityId,success:function(i){if(200==i.data.code){t.videoUrl=i.data.info.videoUrl,t.phone=i.data.info.phone?i.data.info.phone:t.phone,t.freeNum=i.data.info.remainCount;i.data.data.map((function(e){e.prizeName=e.title,e.prizeId=e.id,e.prizeImage=t.$baseUrl+e.imgUrl}));e({ok:!0,data:i.data.data})}else e({ok:!1})}})}))},handleDrawStart:function(){var e=this;if(uni.showLoading({title:"鎶藉涓�..."}),t("log","瑙﹀彂鎶藉鎸夐挳"," at pages/luckdraw/circle-awsc.vue:396"),!this.prizeing){this.prizeing=!0;var i=this.awscData,a=i.sessionId,o=i.sig,r=i.token;uni.request({url:this.$baseUrl+"/tzrb/userAwardRecordUpgrade/saveUpdate",method:"POST",header:{"Content-type":"application/x-www-form-urlencoded"},data:{activityId:this.activityId,sessionId:a,sig:o,token:r},success:function(t){if(200==t.data.code){var i=(0,n.default)(e.prizeList),a=t.data.data;e.msg=t.data.msg;for(var o=0;o<i.length;o++){var r=i[o];if(r.prizeId===a){e.prizeIndex=o;break}}}else if(-1==t.data.code){if(e.prizeing=!1,uni.hideLoading(),!e.isInApp)return void e.gotoApp()}else e.prizeing=!1,uni.hideLoading(),uni.showModal({content:t.data.message,showCancel:!1})}})}},handleDrawEnd:function(){t("log","鏃嬭浆缁撴潫锛屾墽琛屾嬁鍒扮粨鏋滃悗鍒伴€昏緫"," at pages/luckdraw/circle-awsc.vue:454"),this.prizeing=!1,uni.hideLoading(),this.getNoticeList(),uni.showModal({content:this.msg?this.msg:this.prizeList[this.prizeIndex].prizeName,showCancel:!1}),this.size=10,this.current=1,this.pages=1,this.getAward(!1)},handleDrawFinish:function(t){},loadmore:function(){this.status="loading",this.current=++this.current,this.current>this.pages?this.status="nomore":(this.status="loading",this.getAward(!0))},getInfo:function(){var t=this;uni.request({url:this.$baseUrl+"/tzrb/activity/findById",method:"GET",data:{id:this.activityId},success:function(e){200==e.data.code?(t.info=e.data.data,t.info.activityExplain=t.info.activityExplain.split("<br/>")):uni.showToast({title:e.data.message,duration:3e3,mask:!0,icon:"none"})}})},getNoticeList:function(){var t=this;uni.request({url:this.$baseUrl+"/tzrb/systemNotice/list?activityId="+this.activityId,method:"GET",success:function(e){200==e.data.code?t.noticeList=e.data.data:uni.showModal({content:e.data.message,showCancel:!1})}})},noticeEnd:function(){this.getNoticeList()},call:function(e){uni.makePhoneCall({phoneNumber:"ios"==uni.getSystemInfoSync().platform?""+e:"//"+e,success:function(e){t("log","璋冪敤鎴愬姛!"," at pages/luckdraw/circle-awsc.vue:539")},fail:function(e){t("log","璋冪敤澶辫触!"," at pages/luckdraw/circle-awsc.vue:542"),uni.showToast({icon:"none",title:"鎷ㄦ墦澶辫触"})}})},back:function(){uni.navigateBack({delta:1})},getUserInfo:function(){var e=this;uni.showLoading({title:"鐧诲綍涓�..."}),uni.request({url:this.$baseUrl+"/tzrb/user/loginWC",method:"GET",data:{accountId:window.$accountId,sessionId:window.$sessionId},success:function(i){uni.hideLoading(),200==i.data.code?(t("log",i.data," at pages/luckdraw/circle-awsc.vue:570"),e.getAward()):uni.showToast({title:i.data.message,duration:3e3,mask:!0,icon:"none"})}})}},onShow:function(){window.$isInWC&&(t("log","store==",this.$store.state," at pages/luckdraw/circle-awsc.vue:593"),uni.setNavigationBarTitle({title:this.info.activityName||this.$store.state.config.title}),this.handleInitCanvas(),this.getNoticeList(),this.getInfo(),this.isInApp&&this.getUserInfo())},onUnload:function(){uni.hideLoading()},onReachBottom:function(){this.loadmore()}};e.default=u}).call(this,i("0de9")["log"])},"650c":function(t,e,i){"use strict";(function(t){i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"Awsc",props:{showAwsc:{type:Boolean,default:!0}},data:function(){return{}},computed:{isInApp:function(){return window.$isInWC}},created:function(){this.init()},methods:{init:function(){var e=this;AWSC.use("nc",(function(i,a){window.nc=a.init({appkey:"FFFF0N0000000000B5B0",scene:"nc_activity_h5",renderTo:"nc",success:function(t){e.$emit("submit",t)},fail:function(e){t("log",e," at components/awsc.vue:58")},error:function(e){t("log",e," at components/awsc.vue:62")}})}))}}};e.default=a}).call(this,i("0de9")["log"])},"6a07":function(t,e,i){"use strict";(function(t){i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("c7eb")),o=a(i("1da1"));i("a9e3"),i("cb29"),i("14d9"),i("ac1f"),i("00b4"),i("c975"),i("d3b7"),i("fb6a"),i("e9c4");var r=i("30a9"),s={name:"AlmostLottery2",props:{pixelRatio:{type:Number,default:2},canvasId:{type:String,default:"almostLottery"},lotterySize:{type:Number,default:600},actionSize:{type:Number,default:200},canvasMarginOutside:{type:Number,default:90},prizeList:{type:Array,required:!0,validator:function(t){return t.length>1}},prizeIndex:{type:Number,required:!0},colors:{type:Array,default:function(){return["#FFFFFF","#FFBF05"]}},lotteryBg:{type:String,default:"/uni_modules/almost-lottery/static/almost-lottery/almost-lottery__bg2x.png"},actionBg:{type:String,default:"/uni_modules/almost-lottery/static/almost-lottery/almost-lottery__action2x.png"},prizeNameDrawed:{type:Boolean,default:!1},stroked:{type:Boolean,default:!1},strokeColor:{type:String,default:"#FFBF05"},rotateType:{type:String,default:"roulette"},duration:{type:Number,default:8},ringCount:{type:Number,default:8},pointerPosition:{type:String,default:"edge",validator:function(t){return"edge"===t||"middle"===t}},strDirection:{type:String,default:"horizontal",validator:function(t){return"horizontal"===t||"vertical"===t}},strFontColors:{type:Array,default:function(){return["#666","#666"]}},strFontSize:{type:Number,default:24},strMarginOutside:{type:Number,default:0},imgMarginStr:{type:Number,default:60},strLineHeight:{type:Number,default:1.2},strMaxLen:{type:Number,default:12},strLineLen:{type:Number,default:6},imgWidth:{type:Number,default:50},imgHeight:{type:Number,default:50},imgDrawed:{type:Boolean,default:!0},imgCircled:{type:Boolean,default:!1},successMsg:{type:String,default:"濂栧搧鍑嗗灏辩华锛屽揩鏉ュ弬涓庢娊濂栧惂"},failMsg:{type:String,default:"濂栧搧浠嶅湪鍑嗗涓紝璇风◢鍚庡啀鏉�..."},canvasCached:{type:Boolean,default:!1}},data:function(){return{className:"almost-lottery__canvas",systemPixelRatio:2,lotteryPxSize:0,canvasImgPxSize:0,actionPxSize:0,strMarginPxOutside:0,imgMarginPxStr:0,imgPxWidth:0,imgPxHeight:0,lotteryImg:"@/static/images/1.png",targetAngle:0,targetActionAngle:0,transitionDuration:0,isRotate:!1,stayIndex:0,targetIndex:0,isCacheImg:!1,oldLotteryImg:"",measureText:""}},computed:{higtCanvasSize:function(){return this.canvasImgPxSize*this.systemPixelRatio},higtFontSize:function(){return Math.round(this.strFontSize/this.pixelRatio)*this.systemPixelRatio},higtHeightMultiple:function(){return Math.round(this.strFontSize/this.pixelRatio)*this.strLineHeight*this.systemPixelRatio},canvasImgToLeftPx:function(){return(this.lotteryPxSize-this.canvasImgPxSize)/2},actionBgToLeftPx:function(){return(this.lotteryPxSize-this.actionPxSize)/2},canvasAngle:function(){var t=0,e=this.prizeList.length,i=360/e,a=90/i;return t="edge"===this.pointerPosition||"pointer"===this.rotateType?-i*a:-(i*a+i/2),t},actionAngle:function(){return 0},outsideRadius:function(){return this.higtCanvasSize/2},insideRadius:function(){return 20*this.systemPixelRatio},textRadius:function(){return this.strMarginPxOutside*this.systemPixelRatio||this.higtFontSize/2},textDistance:function(){var t=Math.round(this.outsideRadius-this.insideRadius/2);return t-this.textRadius}},watch:{prizeIndex:function(e,i){e>-1?(this.targetIndex=e,this.onRotateStart()):t("info","鏃嬭浆缁撴潫锛宲rizeIndex 宸查噸缃�"," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:343")}},methods:{onRotateStart:function(){var e=this;if(!this.isRotate){this.isRotate=!0;var i=this.prizeList.length,a=360/i,n=0;"pointer"===this.rotateType?(n=0===this.targetActionAngle?(this.targetIndex-this.stayIndex)*a+a/2-this.actionAngle:(this.targetIndex-this.stayIndex)*a,this.stayIndex=this.targetIndex,this.targetActionAngle+=n+360*this.ringCount,t("log","targetActionAngle",this.targetActionAngle," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:371")):(n=0===this.targetAngle?270-(this.targetIndex-this.stayIndex)*a-a/2-this.canvasAngle:-(this.targetIndex-this.stayIndex)*a,this.stayIndex=this.targetIndex,this.targetAngle+=n+360*this.ringCount);var o=1e3*this.transitionDuration+100,r=setTimeout((function(){clearTimeout(r),r=null,e.isRotate=!1,e.$emit("draw-end")}),o),s=setTimeout((function(){clearTimeout(s),s=null,e.$emit("reset-index")}),o+50)}},handleActionStart:function(){this.lotteryImg&&(this.isRotate||this.$emit("draw-start"))},onCreateCanvas:function(){var e=this;return(0,o.default)((0,n.default)().mark((function i(){var a,o,s,l,c,u,d,f,h,m,g,p,v,y,w,x,b,_,I,z,S,C,P,k,L,F,T,A,M,R,U,$,D,N,O,B,j,E,q,H;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:a=e.canvasId,o=uni.createCanvasContext(a,e),s=e.higtCanvasSize,l=e.higtCanvasSize,c=e.prizeList.length,u=2*Math.PI/c,o.setFontSize(e.higtFontSize),d=0;case 8:if(!(d<c)){i.next=125;break}if(f=e.prizeList[d],h=d*u,o.save(),o.beginPath(),o.arc(.5*s,.5*l,e.outsideRadius,h,h+u,!1),o.arc(.5*s,.5*l,e.insideRadius,h+u,h,!0),2===e.colors.length?o.setFillStyle(e.colors[d%2]):o.setFillStyle(e.colors[d]),o.fill(),e.stroked&&(o.setStrokeStyle("".concat(e.strokeColor)),o.stroke()),m=.5*s+Math.cos(h+u/2)*e.textDistance,g=.5*l+Math.sin(h+u/2)*e.textDistance,o.translate(m,g),p=e.strLimit(f.prizeName),1===e.strFontColors.length?o.setFillStyle(e.strFontColors[0]):2===e.strFontColors.length?o.setFillStyle(e.strFontColors[d%2]):o.setFillStyle(e.strFontColors[d]),o.rotate(h+u/2+Math.PI/2),"horizontal"!==e.strDirection){i.next=70;break}if(!p||!e.prizeNameDrawed){i.next=68;break}if(v=(0,r.clacTextLen)(p).realLen,y=v>e.strLineLen,!y){i.next=54;break}for(w=0,x="",b=[],_=0;_<p.length;_++)w+=(0,r.clacTextLen)(p[_]).byteLen,x+=p[_],(w===2*e.strLineLen||p.length-1===_)&&(b.push(x),w=0,x="");I=0;case 34:if(!(I<b.length)){i.next=52;break}if(!(o.measureText&&o.measureText(b[I]).width>0)){i.next=41;break}z=o.measureText(b[I]),S=-(z.width/2).toFixed(2),o.fillText(b[I],S,I*e.higtHeightMultiple),i.next=49;break;case 41:return e.measureText=b[I],i.next=44,e.$nextTick();case 44:return i.next=46,e.getTextWidth();case 46:C=i.sent,P=-(C/2).toFixed(2),o.fillText(b[I],P,I*e.higtHeightMultiple);case 49:I++,i.next=34;break;case 52:i.next=68;break;case 54:if(!(o.measureText&&o.measureText(p).width>0)){i.next=60;break}k=o.measureText(p),L=-(k.width/2).toFixed(2),o.fillText(p,L,0),i.next=68;break;case 60:return e.measureText=p,i.next=63,e.$nextTick();case 63:return i.next=65,e.getTextWidth();case 65:F=i.sent,T=-(F/2).toFixed(2),o.fillText(p,T,0);case 68:i.next=90;break;case 70:A=p.split(""),M=0;case 72:if(!(M<A.length)){i.next=90;break}if(!(o.measureText&&o.measureText(A[M]).width>0)){i.next=79;break}R=o.measureText(A[M]),U=-(R.width/2).toFixed(2),o.fillText(A[M],U,M*e.higtHeightMultiple),i.next=87;break;case 79:return e.measureText=A[M],i.next=82,e.$nextTick();case 82:return i.next=84,e.getTextWidth();case 84:$=i.sent,D=-($/2).toFixed(2),o.fillText(A[M],D,M*e.higtHeightMultiple);case 87:M++,i.next=72;break;case 90:if(!e.imgDrawed||!f.prizeImage||"vertical"===e.strDirection){i.next=121;break}if(N=/^(https|http)/g,!N.test(f.prizeImage)){i.next=110;break}return"","闇€瑕佸鐞嗗ソ璺ㄥ煙闂锛�",t("warn","###褰撳墠鏁版嵁鍒楄〃涓殑濂栧搧鍥剧墖涓虹綉缁滃浘鐗囷紝".concat("闇€瑕佸鐞嗗ソ璺ㄥ煙闂锛�","寮€濮嬪皾璇曚笅杞藉浘鐗�...###")," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:597"),i.next=98,(0,r.downloadFile)(f.prizeImage);case 98:if(O=i.sent,t("log","澶勭悊杩滅▼鍥剧墖",O," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:599"),!O.ok){i.next=107;break}return B=O.tempFilePath,i.next=104,(0,r.pathToBase64)(B);case 104:f.prizeImage=i.sent,i.next=108;break;case 107:e.handlePrizeImgSuc({ok:!1,data:O.data,msg:O.msg});case 108:i.next=116;break;case 110:if(-1!==f.prizeImage.indexOf(";base64,")){i.next=116;break}return t("log","寮€濮嬪鐞嗘湰鍦板浘鐗�",f.prizeImage," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:619"),i.next=114,(0,r.pathToBase64)(f.prizeImage);case 114:f.prizeImage=i.sent,t("log","澶勭悊鏈湴鍥剧墖缁撴潫",f.prizeImage," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:621");case 116:j=-e.imgPxWidth*e.systemPixelRatio/2,E=e.imgMarginPxStr*e.systemPixelRatio,q=e.imgPxWidth*e.systemPixelRatio,H=e.imgPxHeight*e.systemPixelRatio,e.imgCircled?(2===e.colors.length?o.setFillStyle(e.colors[d%2]):o.setFillStyle(e.colors[d]),(0,r.circleImg)(o,f.prizeImage,j,E,q,H)):o.drawImage(f.prizeImage,j,E,q,H);case 121:o.restore();case 122:d++,i.next=8;break;case 125:o.draw(!0,(function(){var t=setTimeout((function(){clearTimeout(t),t=null,uni.canvasToTempFilePath({canvasId:e.canvasId,destWidth:e.higtCanvasSize,destHeight:e.higtCanvasSize,success:function(t){e.handlePrizeImg({ok:!0,data:t.tempFilePath,msg:"鐢诲竷瀵煎嚭鐢熸垚鍥剧墖鎴愬姛"})},fail:function(t){e.handlePrizeImg({ok:!1,data:t,msg:"鐢诲竷瀵煎嚭鐢熸垚鍥剧墖澶辫触"})}},e)}),500)}));case 126:case"end":return i.stop()}}),i)})))()},handlePrizeImg:function(e){if(e.ok){var i=e.data;if(!this.canvasCached)return this.lotteryImg=i,void this.handlePrizeImgSuc(e);(0,r.setStore)("".concat(this.canvasId,"LotteryImg"),i),this.lotteryImg=i,this.handlePrizeImgSuc(e);var a=this.isCacheImg?"缂撳瓨":"瀵煎嚭";t("info","褰撳墠涓� H5 绔紝浣跨敤".concat(a,"涓殑 base64 鍥�")," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:783")}else t("error",e.msg,e," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:786"),t("error","###褰撳墠涓� H5 绔紝涓嬭浇缃戠粶鍥剧墖闇€瑕佸悗绔厤缃厑璁歌法鍩�###"," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:788")},handlePrizeImgSuc:function(t){this.$emit("finish",{ok:t.ok,data:t.data,msg:t.ok?this.successMsg:this.failMsg})},getTextWidth:function(){t("warn","姝ｅ湪閲囩敤鍏煎鏂瑰紡鑾峰彇鏂囨湰鐨� size 淇℃伅"," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:807");var e=uni.createSelectorQuery().in(this),i=e.select(".almost-lottery__measureText");return new Promise((function(t,e){i.fields({size:!0},(function(e){t(e.width)})).exec()}))},strLimit:function(t){var e=this.strMaxLen;return t&&e&&(0,r.clacTextLen)(t).realLen>e?t.slice(0,e-1)+"..":t},checkCacheImg:function(){t("log","妫€鏌ユ湰鍦扮紦瀛樹腑鏄惁瀛樺湪杞洏鍥�"," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:826"),this.oldLotteryImg=(0,r.getStore)("".concat(this.canvasId,"LotteryImg"));var e=(0,r.getStore)("".concat(this.canvasId,"PrizeList")),i=JSON.stringify(this.prizeList);if(this.oldLotteryImg&&e===i)return t("log","缁忔煡锛屾湰鍦扮紦瀛樹腑瀛樺湪杞洏鍥� => ".concat(this.oldLotteryImg)," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:834"),this.isCacheImg=!0,t("log","闇€瑕佺户缁垽鏂繖寮犵紦瀛樺浘鏄惁鍙敤"," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:837"),void this.handlePrizeImg({ok:!0,data:this.oldLotteryImg,msg:"鐢诲竷瀵煎嚭鐢熸垚鍥剧墖鎴愬姛"});t("log","缁忔煡锛屾湰鍦扮紦瀛樹腑涓嶅瓨鍦ㄨ浆鐩樺浘"," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:847"),this.initCanvasDraw()},initCanvasDraw:function(){t("log","寮€濮嬪垵濮嬪寲杞洏缁樺埗"," at uni_modules/almost-lottery/components/almost-lottery/almost-lottery2.vue:852"),this.isCacheImg=!1,this.lotteryImg="",(0,r.clearStore)("".concat(this.canvasId,"LotteryImg")),(0,r.setStore)("".concat(this.canvasId,"PrizeList"),this.prizeList),this.onCreateCanvas()},beforeInit:function(){var t=this;return(0,o.default)((0,n.default)().mark((function e(){var i,a,o,r,s,l,c;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=uni.createSelectorQuery().in(t),e.next=3,new Promise((function(t){i.select(".almost-lottery__wrap").boundingClientRect((function(e){t(e)})).exec()}));case 3:return a=e.sent,e.next=6,new Promise((function(t){i.select(".lottery-action").boundingClientRect((function(e){t(e)})).exec()}));case 6:return o=e.sent,e.next=9,new Promise((function(t){i.select(".str-margin-outside").boundingClientRect((function(e){t(e)})).exec()}));case 9:return r=e.sent,e.next=12,new Promise((function(t){i.select(".img-margin-str").boundingClientRect((function(e){t(e)})).exec()}));case 12:return s=e.sent,e.next=15,new Promise((function(t){i.select(".img-size").boundingClientRect((function(e){t(e)})).exec()}));case 15:l=e.sent,t.lotteryPxSize=Math.floor(a.width),t.canvasImgPxSize=t.lotteryPxSize-Math.floor(o.left)+Math.floor(a.left),t.actionPxSize=Math.floor(o.width),t.strMarginPxOutside=Math.floor(r.left)-Math.floor(a.left),t.imgMarginPxStr=Math.floor(s.left)-Math.floor(a.left),t.imgPxWidth=Math.floor(l.width),t.imgPxHeight=Math.floor(l.height),c=setTimeout((function(){clearTimeout(c),c=null,t.transitionDuration=t.duration}),50);case 24:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;this.$nextTick((function(){var e=setTimeout((function(){clearTimeout(e),e=null,t.beforeInit()}),50)}))}};e.default=s}).call(this,i("0de9")["log"])},7791:function(t,e,i){"use strict";var a=i("9e62"),n=i.n(a);n.a},"90a0":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uPopup:i("3238").default},n=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",[e("u-popup",{attrs:{show:this.showAwsc,mode:"center",round:"14","safe-area-inset-bottom":!0}},[this.isInApp?this._e():e("v-uni-view",[this._v("璇峰厛鐧诲綍")]),this.isInApp?e("div",{attrs:{id:"nc"}}):this._e()],1)],1)},o=[]},"93d4":function(t,e,i){"use strict";var a=i("3d72"),n=i.n(a);n.a},"9e62":function(t,e,i){var a=i("9ec8");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("0883d5a8",a,!0,{sourceMap:!1,shadowMode:!1})},"9ec8":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 杩欓噷鏄痷ni-app鍐呯疆鐨勫父鐢ㄦ牱寮忓彉閲廫r\n *\r\n * uni-app 瀹樻柟鎵╁睍鎻掍欢鍙婃彃浠跺競鍦猴紙https://ext.dcloud.net.cn锛変笂寰堝涓夋柟鎻掍欢鍧囦娇鐢ㄤ簡杩欎簺鏍峰紡鍙橀噺\r\n * 濡傛灉浣犳槸鎻掍欢寮€鍙戣€咃紝寤鸿浣犱娇鐢╯css棰勫鐞嗭紝骞跺湪鎻掍欢浠ｇ爜涓洿鎺ヤ娇鐢ㄨ繖浜涘彉閲忥紙鏃犻渶 import 杩欎釜鏂囦欢锛夛紝鏂逛究鐢ㄦ埛閫氳繃鎼Н鏈ㄧ殑鏂瑰紡寮€鍙戞暣浣撻鏍间竴鑷寸殑App\r\n *\r\n */\r\n/**\r\n * 濡傛灉浣犳槸App寮€鍙戣€咃紙鎻掍欢浣跨敤鑰咃級锛屼綘鍙互閫氳繃淇敼杩欎簺鍙橀噺鏉ュ畾鍒惰嚜宸辩殑鎻掍欢涓婚锛屽疄鐜拌嚜瀹氫箟涓婚鍔熻兘\r\n *\r\n * 濡傛灉浣犵殑椤圭洰鍚屾牱浣跨敤浜唖css棰勫鐞嗭紝浣犱篃鍙互鐩存帴鍦ㄤ綘鐨� scss 浠ｇ爜涓娇鐢ㄥ涓嬪彉閲忥紝鍚屾椂鏃犻渶 import 杩欎釜鏂囦欢\r\n */\r\n/* 棰滆壊鍙橀噺 */\r\n/* 琛屼负鐩稿叧棰滆壊 */\r\n/* 鏂囧瓧鍩烘湰棰滆壊 */\r\n/* 鑳屾櫙棰滆壊 */\r\n/* 杈规棰滆壊 */\r\n/* 灏哄鍙橀噺 */\r\n/* 鏂囧瓧灏哄 */\r\n/* 鍥剧墖灏哄 */\r\n/* Border Radius */\r\n/* 姘村钩闂磋窛 */\r\n/* 鍨傜洿闂磋窛 */\r\n/* 閫忔槑搴� */\r\n/* 鏂囩珷鍦烘櫙鐩稿叧 */.almost-lottery[data-v-bc8e5092]{display:flex;flex-direction:column;justify-content:center;align-items:center}.almost-lottery__canvas[data-v-bc8e5092]{position:absolute;left:-9999px;opacity:0;display:flex;justify-content:center;align-items:center}.lottery-action[data-v-bc8e5092],\r\n.str-margin-outside[data-v-bc8e5092],\r\n.img-margin-str[data-v-bc8e5092],\r\n.img-size[data-v-bc8e5092]{position:absolute;left:0;top:0;z-index:-1}.almost-lottery__measureText[data-v-bc8e5092]{position:absolute;left:0;top:0;white-space:nowrap;font-size:12px;opacity:0}.almost-lottery__wrap[data-v-bc8e5092]{position:relative}.almost-lottery__bg[data-v-bc8e5092],\r\n.almost-lottery__canvas-img[data-v-bc8e5092],\r\n.almost-lottery__action-bg[data-v-bc8e5092]{position:absolute;left:0;top:0}.almost-lottery__canvas-img[data-v-bc8e5092]{transition:-webkit-transform cubic-bezier(.34,.12,.05,.95);transition:transform cubic-bezier(.34,.12,.05,.95);transition:transform cubic-bezier(.34,.12,.05,.95),-webkit-transform cubic-bezier(.34,.12,.05,.95)}',""]),t.exports=e},a75d:function(t,e,i){"use strict";i.r(e);var a=i("650c"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},a995:function(t,e,i){"use strict";i.r(e);var a=i("6a07"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},ac3d:function(t,e,i){"use strict";i.r(e);var a=i("90a0"),n=i("a75d");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("3b65");var r=i("f0c5"),s=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"68448dba",null,!1,a["a"],void 0);e["default"]=s.exports},cb29:function(t,e,i){var a=i("23e7"),n=i("81d5"),o=i("44d2");a({target:"Array",proto:!0},{fill:n}),o("fill")},d35d:function(t,e,i){"use strict";i.r(e);var a=i("de8b"),n=i("0602");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("93d4");var r=i("f0c5"),s=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"51889a42",null,!1,a["a"],void 0);e["default"]=s.exports},dd85:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 杩欓噷鏄痷ni-app鍐呯疆鐨勫父鐢ㄦ牱寮忓彉閲廫r\n *\r\n * uni-app 瀹樻柟鎵╁睍鎻掍欢鍙婃彃浠跺競鍦猴紙https://ext.dcloud.net.cn锛変笂寰堝涓夋柟鎻掍欢鍧囦娇鐢ㄤ簡杩欎簺鏍峰紡鍙橀噺\r\n * 濡傛灉浣犳槸鎻掍欢寮€鍙戣€咃紝寤鸿浣犱娇鐢╯css棰勫鐞嗭紝骞跺湪鎻掍欢浠ｇ爜涓洿鎺ヤ娇鐢ㄨ繖浜涘彉閲忥紙鏃犻渶 import 杩欎釜鏂囦欢锛夛紝鏂逛究鐢ㄦ埛閫氳繃鎼Н鏈ㄧ殑鏂瑰紡寮€鍙戞暣浣撻鏍间竴鑷寸殑App\r\n *\r\n */\r\n/**\r\n * 濡傛灉浣犳槸App寮€鍙戣€咃紙鎻掍欢浣跨敤鑰咃級锛屼綘鍙互閫氳繃淇敼杩欎簺鍙橀噺鏉ュ畾鍒惰嚜宸辩殑鎻掍欢涓婚锛屽疄鐜拌嚜瀹氫箟涓婚鍔熻兘\r\n *\r\n * 濡傛灉浣犵殑椤圭洰鍚屾牱浣跨敤浜唖css棰勫鐞嗭紝浣犱篃鍙互鐩存帴鍦ㄤ綘鐨� scss 浠ｇ爜涓娇鐢ㄥ涓嬪彉閲忥紝鍚屾椂鏃犻渶 import 杩欎釜鏂囦欢\r\n */\r\n/* 棰滆壊鍙橀噺 */\r\n/* 琛屼负鐩稿叧棰滆壊 */\r\n/* 鏂囧瓧鍩烘湰棰滆壊 */\r\n/* 鑳屾櫙棰滆壊 */\r\n/* 杈规棰滆壊 */\r\n/* 灏哄鍙橀噺 */\r\n/* 鏂囧瓧灏哄 */\r\n/* 鍥剧墖灏哄 */\r\n/* Border Radius */\r\n/* 姘村钩闂磋窛 */\r\n/* 鍨傜洿闂磋窛 */\r\n/* 閫忔槑搴� */\r\n/* 鏂囩珷鍦烘櫙鐩稿叧 */[data-v-68448dba] .u-popup__content{width:300px;height:%?200?%;display:flex;align-items:center;justify-content:center}[data-v-68448dba] .u-popup__content{margin-top:20%}',""]),t.exports=e},de8b:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uSwiper:i("0515").default,uNoticeBar:i("754f").default,uCol:i("4c10").default,uButton:i("3570").default,uLoadmore:i("59a4").default,uPopup:i("3238").default,uCodeInput:i("ce66").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"almost-lottery page",style:{background:"#"+t.$store.state.config.bgColor}},[t.videoUrl?i("v-uni-view",{staticStyle:{width:"100%",height:"421.875rpx"}},[i("iframe",{attrs:{src:t.videoUrl,frameborder:"0",width:"100%",height:"100%"}})]):t._e(),!t.videoUrl&&t.info.imageUrls&&t.info.imageUrls.length>0?i("u-swiper",{attrs:{circular:!0,indicator:!0,height:"420rpx",list:t.info.imageUrls,radius:0,current:t.swiperCurrent_img}}):t._e(),i("u-notice-bar",{directives:[{name:"show",rawName:"v-show",value:t.noticeList.length>0,expression:"noticeList.length>0"}],staticStyle:{margin:"24rpx"},attrs:{text:t.noticeList,direction:"column",icon:"涓鍚嶅崟",bgColor:"#ffffff00",color:"#ffffff",labelBg:"#ffbe04",customStyle:{border:"1px solid #ffbe04",borderRadius:"8rpx"}}}),t.prizeList.length>0?i("v-uni-view",{staticClass:"almost-lottery__wheel"},[i("almost-lottery-2",{attrs:{colors:["#fff","#eef0ff"],canvasId:t.canvasConfig.canvasId,ringCount:2,duration:1,prizeList:t.prizeList,prizeIndex:t.prizeIndex},on:{"reset-index":function(e){arguments[0]=e=t.$handleEvent(e),t.prizeIndex=-1},"draw-start":function(e){arguments[0]=e=t.$handleEvent(e),t.handleDrawStart.apply(void 0,arguments)},"draw-end":function(e){arguments[0]=e=t.$handleEvent(e),t.handleDrawEnd.apply(void 0,arguments)},finish:function(e){arguments[0]=e=t.$handleEvent(e),t.handleDrawFinish.apply(void 0,arguments)}}})],1):t._e(),i("v-uni-view",{staticClass:"almost-lottery__rule"},[i("v-uni-view",{staticClass:"rule-head"},[i("v-uni-view",{staticClass:"line"}),i("v-uni-text",{staticClass:"title"},[t._v("鎶藉璁板綍")]),i("v-uni-view",{staticClass:"line"})],1),i("v-uni-view",{staticClass:"rule-body"},t._l(t.awards,(function(e,a){return i("v-uni-view",{staticClass:"item"},[i("v-uni-view",[i("v-uni-view",{staticStyle:{color:"#606266","font-size":"30rpx"}},[i("strong",[t._v(t._s(e.awardName))])]),i("v-uni-view",{staticStyle:{color:"#909399"}},[t._v(t._s(e.createTime))])],1),e.awardName.indexOf("璋㈣阿")<0&&1==t.$store.state.config.useType?i("u-col",{attrs:{span:"3"}},[i("u-button",{attrs:{type:"warning"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoForm()}}},[t._v("鍘婚鍙�")])],1):t._e(),e.awardName.indexOf("璋㈣阿")<0&&2==t.$store.state.config.useType?i("v-uni-view",[e.isUsed?t._e():i("u-button",{attrs:{type:"warning"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.useAward(Object.assign({},{index:a},e))}}},[t._v("浣跨敤")]),e.isUsed?i("u-button",{attrs:{type:"warning",disabled:!0}},[t._v("宸蹭娇鐢�")]):t._e()],1):t._e()],1)})),1)],1),i("u-loadmore",{attrs:{status:t.status,loadmoreText:"鐐瑰嚮鎴栦笂鎷夊姞杞芥洿澶�",color:"#ffffff"},on:{loadmore:function(e){arguments[0]=e=t.$handleEvent(e),t.loadmore.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"almost-lottery__rule"},[i("v-uni-view",{staticClass:"rule-head"},[i("v-uni-view",{staticClass:"line"}),i("v-uni-text",{staticClass:"title"},[t._v("娲诲姩瑙勫垯")]),i("v-uni-view",{staticClass:"line"})],1),i("v-uni-view",{staticClass:"rule-body"},[t._l(t.info.activityExplain,(function(e,a){return i("v-uni-view",{key:"info-"+a,staticClass:"rule"},[i("v-uni-view",{staticClass:"number"},[t._v(t._s(a+1))]),i("v-uni-view",{staticClass:"text"},[t._v(t._s(e))])],1)})),t.phone?i("v-uni-view",{staticClass:"rule",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.call(t.phone)}}},[i("v-uni-view",{staticClass:"number"},[t._v(t._s(t.info.activityExplain.length+1))]),i("v-uni-view",{staticClass:"text"},[t._v("鍜ㄨ鐢佃瘽锛�"+t._s(t.phone))])],1):t._e()],2)],1),i("v-uni-view",{staticStyle:{display:"flex","justify-content":"center","flex-direction":"column","align-items":"center",color:"#ffffff88","font-size":"24rpx",padding:"64rpx"}},[i("v-uni-text",[t._v("鍙板窞甯傛柊闂讳紶濯掍腑蹇�")])],1),i("u-popup",{attrs:{show:t.showPop,mode:"center",round:"14",closeable:!0,"safe-area-inset-bottom":!0},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.showPop=!1}}},[i("v-uni-view",{staticStyle:{padding:"80rpx",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},[i("v-uni-view",{staticStyle:{color:"#606266","font-size":"34rpx","font-weight":"600"}},[t._v("纭畾浣跨敤"+t._s(t.popAward.awardName)+"鍚�?")]),i("v-uni-view",{staticStyle:{color:"#909399",margin:"25rpx 0"}},[t._v("璇峰伐浣滀汉鍛樿緭鍏ユ牳閿€鐮�")]),i("u-code-input",{attrs:{maxlength:4},on:{finish:function(e){arguments[0]=e=t.$handleEvent(e),t.finish.apply(void 0,arguments)}}})],1)],1)],1)},o=[]},f7fc:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 杩欓噷鏄痷ni-app鍐呯疆鐨勫父鐢ㄦ牱寮忓彉閲廫r\n *\r\n * uni-app 瀹樻柟鎵╁睍鎻掍欢鍙婃彃浠跺競鍦猴紙https://ext.dcloud.net.cn锛変笂寰堝涓夋柟鎻掍欢鍧囦娇鐢ㄤ簡杩欎簺鏍峰紡鍙橀噺\r\n * 濡傛灉浣犳槸鎻掍欢寮€鍙戣€咃紝寤鸿浣犱娇鐢╯css棰勫鐞嗭紝骞跺湪鎻掍欢浠ｇ爜涓洿鎺ヤ娇鐢ㄨ繖浜涘彉閲忥紙鏃犻渶 import 杩欎釜鏂囦欢锛夛紝鏂逛究鐢ㄦ埛閫氳繃鎼Н鏈ㄧ殑鏂瑰紡寮€鍙戞暣浣撻鏍间竴鑷寸殑App\r\n *\r\n */\r\n/**\r\n * 濡傛灉浣犳槸App寮€鍙戣€咃紙鎻掍欢浣跨敤鑰咃級锛屼綘鍙互閫氳繃淇敼杩欎簺鍙橀噺鏉ュ畾鍒惰嚜宸辩殑鎻掍欢涓婚锛屽疄鐜拌嚜瀹氫箟涓婚鍔熻兘\r\n *\r\n * 濡傛灉浣犵殑椤圭洰鍚屾牱浣跨敤浜唖css棰勫鐞嗭紝浣犱篃鍙互鐩存帴鍦ㄤ綘鐨� scss 浠ｇ爜涓娇鐢ㄥ涓嬪彉閲忥紝鍚屾椂鏃犻渶 import 杩欎釜鏂囦欢\r\n */\r\n/* 棰滆壊鍙橀噺 */\r\n/* 琛屼负鐩稿叧棰滆壊 */\r\n/* 鏂囧瓧鍩烘湰棰滆壊 */\r\n/* 鑳屾櫙棰滆壊 */\r\n/* 杈规棰滆壊 */\r\n/* 灏哄鍙橀噺 */\r\n/* 鏂囧瓧灏哄 */\r\n/* 鍥剧墖灏哄 */\r\n/* Border Radius */\r\n/* 姘村钩闂磋窛 */\r\n/* 鍨傜洿闂磋窛 */\r\n/* 閫忔槑搴� */\r\n/* 鏂囩珷鍦烘櫙鐩稿叧 */uni-page-body[data-v-51889a42]{height:100%}.page[data-v-51889a42]{width:100%;min-height:100%}.almost-lottery[data-v-51889a42]{flex:1}.almost-lottery__head[data-v-51889a42]{position:relative;width:100%;height:%?640?%}.almost-lottery__head .action[data-v-51889a42]{position:relative;top:%?400?%;display:flex;justify-content:center;align-items:center;width:%?480?%;height:%?88?%;line-height:%?88?%;margin:0 auto;color:#fff;font-size:%?32?%;background-color:#f3b2b8;border-radius:%?44?%}.almost-lottery__head .action-shadow[data-v-51889a42]{box-shadow:0 %?14?% 0 0 #f3b2b8}.almost-lottery__head .num[data-v-51889a42]{color:#f9fc31}.almost-lottery__head .tip[data-v-51889a42]{position:relative;top:%?428?%;color:#fff;font-size:%?24?%;text-align:center}.almost-lottery__wheel[data-v-51889a42]{text-align:center;padding-top:%?20?%}.almost-lottery__wheel .count[data-v-51889a42]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:%?40?% 0}.almost-lottery__wheel .text[data-v-51889a42]{color:#fff;font-size:%?24?%}.almost-lottery__rule[data-v-51889a42]{padding:0 %?28?%;color:#ffbe04}.almost-lottery__rule .rule-head[data-v-51889a42]{display:flex;justify-content:space-around;align-items:center;padding:%?40?% 0}.almost-lottery__rule .rule-head .line[data-v-51889a42]{flex:1;height:1px;background-color:#ffbe04}.almost-lottery__rule .rule-head .title[data-v-51889a42]{width:%?280?%;color:#fff;line-height:%?70?%;text-align:center;margin:0 %?20?%;border-radius:%?8?%;background-color:#ffbe04}.almost-lottery__rule .rule-body[data-v-51889a42]{color:#fff;font-size:%?24?%;padding:%?10?% 0 %?40?%}.almost-lottery__rule .rule-body .item[data-v-51889a42]{display:flex;justify-content:space-between;margin-bottom:%?16?%;background-color:#fff;border-radius:5px;padding:%?16?%}.almost-lottery__rule .rule-body .rule[data-v-51889a42]{display:flex;margin-bottom:%?10?%;text-align:justify}.almost-lottery__rule .rule-body .number[data-v-51889a42]{position:relative;top:%?4?%;width:%?28?%;height:%?28?%;line-height:%?28?%;text-align:center;color:#fff;background:#ffbe04;border-radius:50%;margin-right:%?10?%}.almost-lottery__rule .rule-body .number-hidden[data-v-51889a42]{opacity:0}.almost-lottery__rule .rule-body .text[data-v-51889a42]{flex:1}.almost-lottery__rule .rule-body .item-rule .text[data-v-51889a42]{display:flex;flex-direction:column}.almost-action[data-v-51889a42]{display:flex;flex-direction:row;justify-content:center;align-items:center;width:%?400?%;height:%?80?%;border-radius:%?10?%;text-align:center;background-color:red;margin:0 auto %?40?%}.almost-action .text[data-v-51889a42]{color:#fff;font-size:%?28?%}',""]),t.exports=e},fbe3:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"almost-lottery"},[a("v-uni-view",{staticClass:"almost-lottery__wrap",style:{width:t.lotterySize+"rpx",height:t.lotterySize+"rpx"}},[a("v-uni-view",{staticClass:"lottery-action",style:{width:t.actionSize+"rpx",height:t.actionSize+"rpx",left:t.canvasMarginOutside+"rpx"}}),a("v-uni-view",{staticClass:"str-margin-outside",style:{left:t.strMarginOutside+"rpx"}}),a("v-uni-view",{staticClass:"img-margin-str",style:{left:t.imgMarginStr+"rpx"}}),a("v-uni-view",{staticClass:"img-size",style:{width:t.imgWidth+"rpx",height:t.imgHeight+"rpx"}}),t.lotteryImg?t._e():a("v-uni-view",{staticStyle:{color:"#fff"}},[t._v("濂栧搧鍑嗗涓�...")]),t.lotteryImg?[a("v-uni-image",{staticClass:"almost-lottery__bg",style:{width:t.lotteryPxSize+"px",height:t.lotteryPxSize+"px"},attrs:{mode:"widthFix",src:t.lotteryBg}}),a("v-uni-image",{staticClass:"almost-lottery__canvas-img",style:{width:t.canvasImgPxSize+"px",height:t.canvasImgPxSize+"px",left:t.canvasImgToLeftPx+"px",top:t.canvasImgToLeftPx+"px",transform:"rotate("+(t.canvasAngle+t.targetAngle)+"deg)",transitionDuration:t.transitionDuration+"s"},attrs:{mode:"widthFix",src:i("376b")}}),a("v-uni-image",{staticClass:"almost-lottery__action-bg",style:{width:t.actionPxSize+"px",height:t.actionPxSize+"px",left:t.actionBgToLeftPx+"px",top:t.actionBgToLeftPx+"px",transform:"rotate("+(t.actionAngle+t.targetActionAngle)+"deg)",transitionDuration:t.transitionDuration+"s"},attrs:{mode:"widthFix",src:t.actionBg},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleActionStart.apply(void 0,arguments)}}})]:t._e()],2),a("v-uni-text",{staticClass:"almost-lottery__measureText",style:{fontSize:t.higtFontSize+"px"}},[t._v(t._s(t.measureText))]),a("v-uni-canvas",{class:t.className,style:{width:t.higtCanvasSize+"px",height:t.higtCanvasSize+"px"},attrs:{"canvas-id":t.canvasId,width:t.higtCanvasSize,height:t.higtCanvasSize}})],1)},n=[]}}]);
